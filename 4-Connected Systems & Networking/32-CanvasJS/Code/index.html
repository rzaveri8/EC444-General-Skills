<!-- client side -->

<!doctype html>
<html>

<!-- HTML HEAD -->
<head>
	<title>CanvasJS Skill</title>
	<!-- Source for Canvas JS - points to the web - needs internet -->
	<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
	<!-- Source for Socket.io - this one is local -->
	<script src="/socket.io/socket.io.js"></script>

	<style>
  	canvas{
  		-moz-user-select: none;
  		-webkit-user-select: none;
  		-ms-user-select: none;
  	}
	</style>
</head>

<body>
	<!-- HTML layout -->
<center>  <h1> My Hard Work :)</h1> <br> </center>
	<div id="chartContainer" style="height: 300px; width: 100%;"></div>

	<div id="chartContainer1" style="height: 370px; width: 100%;"></div>
	<br><br>
	<div id="chartContainer2" style="height: 300px; width: 100%;"></div>
	<!-- <div id="test" style="height: 300px; width: 100%;"></div> -->
	<!-- Script to handle charting -->
	<script>
	var dp_amzn = [];
	var dp_fb = [];
	var dp_goog = [];
	var dp_msft = [];

		window.onload = function() {
			var chart = new CanvasJS.Chart("chartContainer", {
				theme: "light2",
		animationEnabled: true,
		title:{
			text: "Random Multiple Lines"
		},
		axisY :{
			includeZero: false,
		},
		toolTip: {
			shared: true
		},
		legend: {
			fontSize: 13
		},
		data: [{
			type: "splineArea",
			//showInLegend: true,
			name: "wow",
			yValueFormatString: "$#,##0",
			xValueFormatString: "MMM YYYY",
			dataPoints: [
				{ x: new Date(2016, 2), y: 30000 },
				{ x: new Date(2016, 3), y: 35000 },
				{ x: new Date(2016, 4), y: 30000 },
				{ x: new Date(2016, 5), y: 30400 },
				{ x: new Date(2016, 6), y: 20900 },
				{ x: new Date(2016, 7), y: 31000 },
				{ x: new Date(2016, 8), y: 30200 },
				{ x: new Date(2016, 9), y: 30000 },
				{ x: new Date(2016, 10), y: 33000 },
				{ x: new Date(2016, 11), y: 38000 },
				{ x: new Date(2017, 0),  y: 38900 },
				{ x: new Date(2017, 1),  y: 39000 }
			]
	 	},
		{
			type: "splineArea",
		//	showInLegend: true,
			name: "this",
			yValueFormatString: "$#,##0",
			dataPoints: [
				{ x: new Date(2016, 2), y: 20100 },
				{ x: new Date(2016, 3), y: 16000 },
				{ x: new Date(2016, 4), y: 14000 },
				{ x: new Date(2016, 5), y: 18000 },
				{ x: new Date(2016, 6), y: 18000 },
				{ x: new Date(2016, 7), y: 21000 },
				{ x: new Date(2016, 8), y: 22000 },
				{ x: new Date(2016, 9), y: 25000 },
				{ x: new Date(2016, 10), y: 23000 },
				{ x: new Date(2016, 11), y: 25000 },
				{ x: new Date(2017, 0), y: 26000 },
				{ x: new Date(2017, 1), y: 25000 }
			]
	 	},
		{
			type: "splineArea",
			//showInLegend: true,
			name: "is so",
			yValueFormatString: "$#,##0",
			dataPoints: [
				{ x: new Date(2016, 2), y: 10100 },
				{ x: new Date(2016, 3), y: 6000 },
				{ x: new Date(2016, 4), y: 3400 },
				{ x: new Date(2016, 5), y: 4000 },
				{ x: new Date(2016, 6), y: 9000 },
				{ x: new Date(2016, 7), y: 3900 },
				{ x: new Date(2016, 8), y: 4200 },
				{ x: new Date(2016, 9), y: 5000 },
				{ x: new Date(2016, 10), y: 14300 },
				{ x: new Date(2016, 11), y: 12300 },
				{ x: new Date(2017, 0), y: 8300 },
				{ x: new Date(2017, 1), y: 6300 }
			]
	 	},
		{
			type: "splineArea",
			//showInLegend: true,
			yValueFormatString: "$#,##0",
			name: "COOL",
			dataPoints: [
				{ x: new Date(2016, 2), y: 1700 },
				{ x: new Date(2016, 3), y: 2600 },
				{ x: new Date(2016, 4), y: 1000 },
				{ x: new Date(2016, 5), y: 1400 },
				{ x: new Date(2016, 6), y: 900 },
				{ x: new Date(2016, 7), y: 1000 },
				{ x: new Date(2016, 8), y: 1200 },
				{ x: new Date(2016, 9), y: 5000 },
				{ x: new Date(2016, 10), y: 1300 },
				{ x: new Date(2016, 11), y: 2300 },
				{ x: new Date(2017, 0), y: 2800 },
				{ x: new Date(2017, 1), y: 1300 }
			]
		}]
	});
	chart.render();

		var chart1 = new CanvasJS.Chart("chartContainer1", {
			theme: "light2", // "light1", "light2", "dark1", "dark2"
			exportEnabled: true,
			animationEnabled: true,
			title: {
				text: "How I Procrastinate"
			},
			data: [{
				type: "pie",
				startAngle: 25,
				toolTipContent: "<b>{label}</b>: {y}%",
				showInLegend: "true",
				legendText: "{label}",
				indexLabelFontSize: 16,
				indexLabel: "{label} - {y}%",
				dataPoints: [
					{ y: 51.08, label: "Zoning out" },
					{ y: 27.34, label: "Talking about how much I have to do" },
					{ y: 10.62, label: "Netflix" },
					{ y: 5.02, label: "Worrying about work" },
					{ y: 4.07, label: "Telling myself my grades don't determine self worth" },
					{ y: 1.22, label: "Opera" },
					{ y: 0.44, label: "Other" }
				]
			}]
		});
		chart1.render();



		var chart2 = new CanvasJS.Chart("chartContainer2", {
			theme: "light2",
			exportEnabled: true,
			animationEnabled: true,
			title: {
				text: "Actual Work...Graph of CSV File"
			},
			axisY: {
				includeZero: false
			},
			data: [
			{
				type: "line",
				showInLegend: true,
				name: "Amazon",
				dataPoints: dp_amzn
			},
			{
				type: "line",
				showInLegend: true,
				name: "Facebook",
				dataPoints: dp_fb
			},
			{
				type: "line",
				showInLegend: true,
				name: "Google",
				dataPoints: dp_goog
			},
			{
				type: "line",
				showInLegend: true,
				name: "Microsoft",
				dataPoints: dp_msft
			}
		]
		});
		chart2.render();

		}


	</script>
<!-- Script to handle parsing the csv data -->
<script>

	var socket = io();
	var elems_am = [];
	var elems_fb = [];
	var elems_go = [];
	var elems_ms = [];

	socket.on('transmit_data', function(data){

		for (i = 0; i < data.length-1; i = i + 4) {
			//console.log("testing");
			elems_am = data[i].split(',');
			elems_fb = data[i+1].split(',');
			elems_go = data[i+2].split(',');
			elems_ms = data[i+3].split(',');
			dp_amzn.push({
				x: parseFloat(elems_am[0]),
				y: parseFloat(elems_am[2])
			});
			dp_fb.push({
				x: parseFloat(elems_fb[0]),
				y: parseFloat(elems_fb[2])
			});
			dp_goog.push({
				x: parseFloat(elems_go[0]),
				y: parseFloat(elems_go[2])
			});

			dp_msft.push({
				x: parseFloat(elems_ms[0]),
				y: parseFloat(elems_ms[2])
			});
		}
	});

</script>
</body>

</html>
